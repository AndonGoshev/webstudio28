{% load static %}

<section id="testimonials">

    <div id="testimonials-heading">

        <p>Отзиви</p>
        <h2>Част от нашите клиенти и проектите, които създадохме за тях</h2>

    </div>

    <div id="partydrinks-section" class="t-card" style="display: none;">

        <h3><a target="_blank" href="https://www.partydrinks.bg" class="website-link">www.partydrinks.bg</a> - Цялостен редизайн на най-големият сайт за алкохолни напитки в България.</h3>

        <div class="design-comparison-container">

            <img src="{% static 'images/partydrinks-old.png' %}" alt="Old Design" class="image-before">
            <img src="{% static 'images/partydrinks-new.png' %}" alt="New Design" class="image-after">
            <div class="slider-bar">
                <div class="slider-handle"></div>
            </div>

        </div>

    </div>


    <div id="testimonials-cards">

        <div class="t-card">


            {#            <div class="t-profile">#}
            {##}
            {##}
            {#            </div>#}

            <div class="website-media">

                <a href="https://www.airevest.com" target="_blank"><img alt="Сайт на Симеон Гатев" src="{% static 'images/airevest.png' %}"></a>

            </div>

            <a target="_blank" href="https://www.airevest.com" class="website-link">www.airevest.com</a>

            <p>Изключително доволен съм от Webstudio28! Много ми помогнаха да изчистя идеята си и я реализираха по
                най-добрия начин. Отлична комуникация, професионализъм и внимание към детайла!
            </p>

            <hr>

            <div class="name-stars">

                <p><img class="profile-img" src="{% static 'images/simeon-gatev.jpeg' %}" alt="Симеон Гатев">Симеон
                    Гатев</p>

                <div class="star-rating">
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                </div>

            </div>

        </div>

        <div class="t-card">

            <div class="website-media">

                <a href="https://www.rosi-yovcheva.com" target="_blank"><img
                        src="{% static 'images/rosi-yovcheva.png' %}" alt="Сайт на Роси Йовчева"></a>

            </div>

            <a target="_blank" href="https://www.rosi-yovcheva.com" class="website-link">www.rosi-yovcheva.com</a>

            <p>Не вярвах, че правенето на сайт може да е толкова лесно и бързо! Почти без думи ме разбраха, всичко
                беше светкавично. Сайтът напълно отразява мен и моята работа – и хората го усещат още с първото влизане.</p>

            <hr>

            <div class="name-stars">

                <p><img class="profile-img" src="{% static 'images/rosi-yovcheva.jpg' %}" alt="Роси Йовчева профилна снимка">Роси
                    Йовчева</p>

                <div class="star-rating">
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                </div>

            </div>

        </div>

        <div class="t-card">

            <div class="website-media">

                <a href="https://www.darsimoti.com" target="_blank"><img alt="Сайт на Снежана Шкодрова" src="{% static 'images/darsimoti.png' %}"></a>

            </div>

            <a target="_blank" href="https://www.darsimoti.com" class="website-link">www.darsimoti.com</a>

            <p>Преди ми предлагаха сложни и тежки софтуерни решения, които не отговаряха на нуждите ми. Тук обаче за
                първи път някой наистина разбра какво искам – модерен, изчистен сайт, който точно отразява бизнеса ми,
                без нищо излишно.</p>

            <hr>

            <div class="name-stars">

                <p><img class="profile-img" src="{% static 'images/snejana-shkodrova.jpg' %}" alt="Профилна снимка Снежана Шкодрова">Снежана
                    Шкодрова</p>

                <div class="star-rating">
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                </div>

            </div>

        </div>

    </div>

</section>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        gsap.registerPlugin(ScrollTrigger);

        gsap.from(".t-card", {
            scrollTrigger: {
                trigger: "#testimonials-cards",
                start: "top 75%",
                toggleActions: "play none none none"
            },
            opacity: 0,
            y: 40,
            duration: 1,
            stagger: 0.6,
            ease: "power2.out"
        });
    });
</script>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const container = document.querySelector('.design-comparison-container');
        const slider = container.querySelector('.slider-bar');
        const imageBefore = container.querySelector('.image-before');
        const imageAfter = container.querySelector('.image-after');

        let isDragging = false;

        const startDragging = (e) => {
            isDragging = true;
            const event = e.touches ? e.touches[0] : e;
            slider.style.transition = 'none'; // Disable transition during drag for smoother movement
            document.body.style.cursor = 'ew-resize';
            document.body.style.userSelect = 'none';
        };

        const stopDragging = () => {
            isDragging = false;
            slider.style.transition = ''; // Re-enable transition
            document.body.style.cursor = 'default';
            document.body.style.userSelect = 'auto';
        };

        const onDrag = (e) => {
            if (!isDragging) return;

            const event = e.touches ? e.touches[0] : e;
            const rect = container.getBoundingClientRect();
            let offsetX = event.clientX - rect.left;

            // Clamp the value between 0 and container's width
            offsetX = Math.max(0, Math.min(offsetX, rect.width));

            const percent = (offsetX / rect.width) * 100;

            slider.style.left = `${percent}%`;
            imageAfter.style.clipPath = `inset(0 0 0 ${percent}%)`;
            imageBefore.style.clipPath = `inset(0 ${100 - percent}% 0 0)`;


        };

        slider.addEventListener('mousedown', startDragging);
        slider.addEventListener('touchstart', startDragging);

        document.addEventListener('mouseup', stopDragging);
        document.addEventListener('touchend', stopDragging);

        document.addEventListener('mousemove', onDrag);
        document.addEventListener('touchmove', onDrag);
    });

</script>
